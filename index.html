<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> WorkSphere </title>
  <link rel="stylesheet" href="style.css">
</head>
<body> 
  <header>
    <h1> WorkSphere - Staff Managemence Space </h1>
  </header>
  <main class="container">
    <!-- la partie gauche qui contient les emplyées non assignés -->
    <div class="unassigned-staff">
      <!-- **FIXED: Added id="addstaffBtn"** -->
      <button id="addstaffBtn" class="addstaff"> Add New Staff </button>
      <form id="addstaffform" style="display: none;">
        <h3>Add a New Staff Member</h3>
        <label>
            Full Name
            <input type="text" placeholder="El Qartit Bouchra" >
        </label>

        <label class="role-label">
            Occupation
            <select name="role" required>
                <option value="">-- choose --</option>
                <option> Receptionist </option>
                <option> IT TECH </option>
                <option> Security Agents </option>
                <option> Manager </option>
                <option> Cleaning Staff </option>
                <option> Other </option>
            </select>
        </label>
        <label>
            Experience
            <input type="text" placeholder="1 year " >
        </label>
        <label>
            Phone Number:
            <input type="tel" placeholder="0625883148" required>
        </label>

        <label>
            Mail:
            <input type="email" placeholder="gmail.com">
        </label>

        <label>
            Picture:
            <input id="staffimage" type="url" placeholder="image">
        </label>
        <button class="button-ajouter" type="submit">Ajouter</button>
      </form>
      <!-- Added a container to list the staff members -->
      <div id="unassignedStaffList">
        <!-- Staff members will be added here dynamically -->
      </div>
      <div id="unassignedStaffList">
        <p id="noStaffMsg">No staff available</p>
      </div>
      <div id="assignPopup" class="popup" style="display:none;">
        <h3>Select a staff member</h3>
        <div id="popupStaffList"></div>
      </div>
    </div>
    <!-- la partie droite containing the 6 boxes of the floors -->
    <div class="building-floor">
      <!-- ... (rest of the building divs) ... -->
      <div class="conference-room">
        <h3> Conference Room </h3>
        <div class="zone-content"> 
          <button class="add" data-room="conference-room"> ➕ </button>
        </div>
      </div>
      <div class="reception">
        <h3> Reception </h3>
        <div class="zone-content"> 
          <button class="add" data-room="reception"> ➕ </button>
        </div>
      </div>
      <div class="server-room">
        <h3> Server Room </h3>
        <div class="zone-content"> 
          <button class="add" data-room="server-room"> ➕ </button>
        </div>
      </div>
      <div class="security-room">
        <h3> Security Room </h3>
        <div class="zone-content"> 
          <button class="add" data-room="security-room"> ➕ </button>
        </div>
      </div>
      <div class="staff-room">
        <h3> Staff Room </h3>
        <div class="zone-content"> 
          <button class="add" data-room="staff-room"> ➕ </button>
        </div>
      </div>
      <div class="archive-room">
        <h3> Archive Room </h3>
        <div class="zone-content"> 
          <button class="add" data-room="archive-room"> ➕ </button>
        </div>
      </div>
    </div>
  </main>
  <footer>

  </footer> 
  <script>
    const addButton = document.getElementById("addstaffBtn");
    const staffForm = document.getElementById("addstaffform");
    const staffListContainer = document.getElementById("unassignedStaffList");

    // Select ALL new form fields (since they have no IDs anymore)
    const nameInput = staffForm.querySelector("input[type='text']");
    const roleInput = staffForm.querySelector("select[name='role']");
    const phoneInput = staffForm.querySelector("input[type='tel']");
    const emailInput = staffForm.querySelector("input[type='email']");
    const photoInput = staffForm.querySelector("input[type='url']");

    // 1. Show the form
    addButton.addEventListener("click", () => {
        staffForm.style.display = "block";
    });

    // 2. Save on submit
    staffForm.addEventListener("submit", event => {
        event.preventDefault();

        const name = nameInput.value.trim();
        const role = roleInput.value.trim();
        const phone = phoneInput.value.trim();
        const email = emailInput.value.trim();
        const photo = photoInput.value.trim();

        if (!name || !role || !phone || !email) {
            alert("Please fill in all required fields.");
            return;
        }

        addStaffMemberToList(name, role, phone, email, photo);

        staffForm.reset();
        staffForm.style.display = "none";
    });

    // 3. Add the worker card
    function addStaffMemberToList(name, role, phone, email, photo) {
        const staffDiv = document.createElement("div");
        staffDiv.classList.add("staff-member-card");

        staffDiv.innerHTML = `
            <img src="${photo || 'https://cdn-icons-png.flaticon.com/512/847/847969.png'}" 
                 class="staff-photo">

            <h4>${name}</h4>
            <p><strong>Role:</strong> ${role}</p>
            <p><strong>Phone:</strong> ${phone}</p>
            <p><strong>Email:</strong> ${email}</p>
        `;

        staffListContainer.appendChild(staffDiv);
    }
    // --- POPUP ELEMENTS ---
const assignPopup = document.getElementById("assignPopup");
const popupStaffList = document.getElementById("popupStaffList");

// 1. When clicking ➕ -> show popup with staff list
document.querySelectorAll(".add").forEach(btn => {
    btn.addEventListener("click", () => {
        const room = btn.dataset.room; // which room button clicked
        openAssignPopup(room);
    });
});

// 2. Open popup and show unassigned staff choices
function openAssignPopup(roomName) {
    popupStaffList.innerHTML = ""; // clear old list

    const staffCards = Array.from(staffListContainer.querySelectorAll(".staff-member-card"));

    if (staffCards.length === 0) {
        popupStaffList.innerHTML = "<p>No staff available</p>";
    }

    staffCards.forEach(card => {
        const option = document.createElement("div");
        option.classList.add("staff-option");
        option.textContent = card.querySelector("h4").textContent;

        option.addEventListener("click", () => {
            assignStaffToRoom(card, roomName);
            assignPopup.style.display = "none";
        });

        popupStaffList.appendChild(option);
    });

    assignPopup.style.display = "block";
}

// 3. Move selected staff to the room
function assignStaffToRoom(staffCard, roomName) {
    const roomDiv = document.querySelector(`.${roomName} .zone-content`);
    roomDiv.appendChild(staffCard);
}

function updateNoStaffMessage() {
    const hasStaff = staffListContainer.querySelectorAll(".staff-member-card").length > 0;
    document.getElementById("noStaffMsg").style.display = hasStaff ? "none" : "block";
}
</script>
</body>
</html>